<html>
   <head>
      <style>
         table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
         }
      </style>
   </head>
   <body>
      <h1>Simple Example</h1>
      What now follows, is a very simple repeating group example.
      <h2>The Settings File</h2>
      Let's say we've configured our OpenClinica study in such a way, that we're not interested in gender, but the year of birth is necessary. Furthermore, we'll be generating the identifiers, as we want to create study specific ones. Our settings file looks like this:
      <table>
         <tr>
            <td>StudyName</td>
            <td>CTMM-ESRA</td>
         </tr>
         <tr>
            <td>GenerateIdentifiers</td>
            <td>Y</td>
         </tr>
         <tr>
            <td>UsePersonID</td>
            <td>N</td>
         </tr>
         <tr>
            <td>StudySubjectIDDef</td>
            <td>studynr</td>
         </tr>
         <tr>
            <td>StudySubjectIDPrefix</td>
            <td>DemoId-</td>
         </tr>   
         <tr>
            <td>VisitDateDef</td>
            <td>visitdate</td>
         </tr>
         <tr>
            <td>UseDateOfBirth</td>
            <td>Y</td>
         </tr>
         <tr>
            <td>DateOfBirthDef</td>
            <td>dob</td>
         </tr>
         <tr>
            <td>YearOfBirthOnly</td>
            <td>Y</td>
         </tr>
         <tr>
            <td>UseGender</td>
            <td>N</td>
         </tr>
         <tr>
            <td>DateFormat</td>
            <td>dd/M/yyyy</td>
         </tr>
      </table>   
      We place this file in the settings directory as a tab-delimited text file, calling it settings.txt
      <h2>The Data File</h2>
      Let's say we have the following data file
		<table>
			<tr>
				<th>studynr</th>
				<th>gender</th>
				<th>dob</th>
				<th>visitdate</th>
				<th>medname_1</th>
				<th>startdate_1</th>
				<th>medname_2</th>
				<th>startdate_2</th>
				<th>medname_3</th>
				<th>startdate_3</th>
			</tr>
			<tr>
				<td>1</td>
				<td>1</td>
				<td>26/07/1948</td>
				<td>17/05/2006</td>
				<td>adalimumab</td>
				<td>28/04/2004</td>
				<td>infliximab</td>
				<td>05/01/2005</td>
				<td>etanercept</td>
				<td>06/06/2006</td>
			</tr>
			<tr>
				<td>2</td>
				<td>0</td>
				<td>15/02/1950</td>
				<td>17/05/2006</td>
				<td>infliximab</td>
				<td>13/09/2001</td>
				<td>adalimumab</td>
				<td>22/01/2004</td>
				<td>etanercept</td>
				<td>10/10/2006</td>
			</tr>
		</table>
      As can be seen, this set has two patients and both have one visit. Both patients have three medication repeats; _1, _2 and _3. We place this file in the data directory as a tab-delimited text file, calling it data.txt 
      <h2>The CRF</h2>
      Let's say we have a CRF which is about medication history. The CRF contains two fields. The following are the relevant fields from our CRF:
		<table>
			<tr>
				<th>ITEM_NAME</th>
				<th>GROUP_LABEL</th>
				<th>RESPONSE_TYPE</th>
				<th>RESPONSE_OPTIONS_TEXT</th>
				<th>RESPONSE_VALUES_OR_CALCULATIONS</th>
				<th>DATA_TYPE</th>
			</tr>
			<tr>
				<td>MedName</td>
				<td>MedGroup</td>
				<td>single-select</td>
				<td>None, adalimumab, infliximab, etanercept, No Information</td>
				<td>,1,2,3, -1</td>
				<td>INT</td>
			</tr>
			<tr>
				<td>MedStartDate</td>
				<td>MedGroup</td>
				<td>text</td>
				<td></td>
				<td></td>
				<td>DATE</td>
			</tr>
		</table>

      <h2>The Template File</h2>
      Every template requires the StudySubjectID item. Furthermore, we'll be using a tranlate action to translate the provided medication to the coding specified in the CRF. For the date we'll be using a CopyDate action to ensure the proper date format. The Type column for the items in our repeating group is G1 as all our items are in the same repeating group. For the repeating group's columns, we're only mentioning the first repeat. 
		<table>
			<tr>
				<th>Item_Name</th>
				<th>Type</th>
				<th>Action</th>
				<th>DataColumn</th>
				<th>Value/TranslateTo</th>
				<th>Text</th>
				<th>TranslateFrom</th>
				<th>Text</th>
				<th>Check/Postprocess</th>
				<th>Check</th>
				<th>New Value</th>
			</tr>
			<tr>
				<td>StudySubjectID</td>
				<td>id</td>
				<td>StudySubjectID</td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td>MedName</td>
				<td>G1</td>
				<td>Translate</td>
				<td>medname_1</td>
				<td>1</td>
				<td>adalimumab</td>
				<td>adalimumab</td>
				<td>adalimumab</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td>2</td>
				<td>infliximab</td>
				<td>infliximab</td>
				<td>infliximab</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td>3</td>
				<td>etanercept</td>
				<td>etanercept</td>
				<td>etanercept</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td>-1</td>
				<td>no information</td>
				<td></td>
				<td>no information</td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
			<tr>
				<td>MedStartDate</td>
				<td>G1</td>
				<td>CopyDate</td>
				<td>startdate_1</td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
				<td></td>
			</tr>
		</table>
      We place this file in the templates directory as a tab-delimited file, calling it simpleGTemplate.txt
   <h2>Putting it all together</h2>
      With all the files located in the proper directories, we now run the GenericTransform tool. We select the files in the GUI and press the run button. We generate the data for the first visit. Our out directory now contains a file called simpleGTemplate_Out_1.txt, which contains the following:
		<table>
			<tr>
				<th>StudySubjectID</th>
				<th>MedName_G1</th>
				<th>MedStartDate_G1</th>
				<th>MedName_G2</th>
				<th>MedStartDate_G2</th>
				<th>MedName_G3</th>
				<th>MedStartDate_G3</th>
			</tr>
			<tr>
				<td>DemoId-1</td>
				<td>1</td>
				<td>2004-04-28</td>
				<td>2</td>
				<td>2005-01-05</td>
				<td>3</td>
				<td>2006-06-06</td>
			</tr>
			<tr>
				<td>DemoId-2</td>
				<td>2</td>
				<td>2001-09-13</td>
				<td>1</td>
				<td>2004-01-22</td>
				<td>3</td>
				<td>2006-10-10</td>
			</tr>
		</table>
      <br>
      Furthermore, we have a logfile in our log directory, which in this case is empty, as there were no problems. The base directory contains the registrationFile for the patients:
		<table>
			<tr>
				<th>StudySubjectID</th>
				<th>Date_of_Birth</th>
				<th>V1</th>
			</tr>
			<tr>
				<td>DemoId-1</td>
				<td>1948</td>
				<td>2006-05-17</td>
			</tr>
			<tr>
				<td>DemoId-2</td>
				<td>1950</td>
				<td>2006-05-17</td>
			</tr>
		</table>
      The base directory also contains an identifier file, which can be specified in the settings file, to prevent patients from being scheduled multiple times. 
      <br><br>
      The data file and the registration file are ready to be used in the OCDataImporter.
   </body>
</html>
